global.REDIS_STORE=CLASS(function(E){"use strict";var r,R,t;return{init:function(E,o,i){var n,e,S,s,O,_;void 0===t&&(void 0!==NODE_CONFIG.redisPorts?(r=require("redis-clustr"),t=new r({servers:RUN(function(){var E=[];return CHECK_IS_ARRAY(NODE_CONFIG.redisPorts)===!0?EACH(NODE_CONFIG.redisPorts,function(r){E.push({host:"127.0.0.1",port:r})}):EACH(NODE_CONFIG.redisPorts,function(r,R){EACH(r,function(r){E.push({host:R,port:r})})}),E})})):(R=require("redis"),t=R.createClient({host:NODE_CONFIG.redisHost,port:NODE_CONFIG.redisPort}))),o.save=n=function(E,r){var R,o,n=E.name,e=E.value;void 0!==r&&(CHECK_IS_DATA(r)!==!0?R=r:(R=r.success,o=r.error)),t.hset(i,n,STRINGIFY(e),function(E){E!==TO_DELETE?void 0!==o?o(E.toString()):SHOW_ERROR("[UPPERCASE-UTIL] REDIS_STORE `"+i+"` ERROR:",E):void 0!==R&&R()})},o.get=e=function(E,r){var R,o;CHECK_IS_DATA(r)!==!0?R=r:(R=r.success,o=r.error),t.hget(i,E,function(E,r){E!==TO_DELETE?void 0!==o?o(E.toString()):SHOW_ERROR("[UPPERCASE-UTIL] REDIS_STORE `"+i+"` ERROR:",E):r===TO_DELETE?R():R(PARSE_STR(r))})},o.remove=S=function(E,r){var R,o;void 0!==r&&(CHECK_IS_DATA(r)!==!0?R=r:(R=r.success,o=r.error)),t.hdel(i,E,function(E){E!==TO_DELETE?void 0!==o?o(E.toString()):SHOW_ERROR("[UPPERCASE-UTIL] REDIS_STORE `"+i+"` ERROR:",E):void 0!==R&&R()})},o.list=s=function(E){var r,R;CHECK_IS_DATA(E)!==!0?r=E:(r=E.success,R=E.error),t.hgetall(i,function(E,t){E!==TO_DELETE?void 0!==R?R(E.toString()):SHOW_ERROR("[UPPERCASE-UTIL] REDIS_STORE `"+i+"` ERROR:",E):t===TO_DELETE?r({}):(EACH(t,function(E,r){t[r]=PARSE_STR(E)}),r(t))})},o.count=O=function(E){var r,R;CHECK_IS_DATA(E)!==!0?r=E:(r=E.success,R=E.error),t.hlen(i,function(E,t){E!==TO_DELETE?void 0!==R?R(E.toString()):SHOW_ERROR("[UPPERCASE-UTIL] REDIS_STORE `"+i+"` ERROR:",E):r(t)})},o.clear=_=function(E){var r,R;void 0!==E&&(CHECK_IS_DATA(E)!==!0?r=E:(r=E.success,R=E.error)),t.del(i,function(E){E!==TO_DELETE?void 0!==R?R(E.toString()):SHOW_ERROR("[UPPERCASE-UTIL] REDIS_STORE `"+i+"` ERROR:",E):void 0!==r&&r()})}}}}),FOR_BOX(function(E){"use strict";E.REDIS_STORE=CLASS({init:function(r,R,t){var o,i,n,e,S,s,O=REDIS_STORE(E.boxName+"."+t);R.save=o=O.save,R.get=i=O.get,R.remove=n=O.remove,R.list=e=O.list,R.count=S=O.count,R.clear=s=O.clear}})});